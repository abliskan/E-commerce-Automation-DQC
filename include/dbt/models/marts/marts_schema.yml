models:
  - name: mart_orders
    description: "Order-level analytics mart"
    config:
      tags: ['mart']
    columns:
      - name: order_key
        tests:
          - not_null

      - name: order_id
        tests:
          - not_null
      
      - name: customer_key
        tests:
          - not_null

      - name: order_date
        tests:
          - not_null

      - name: order_status
        tests:
          - not_null

      - name: currency
        tests:
          - not_null

      - name: order_amount
        tests:
          - not_null
      
      - name: payment_status
        tests: []

      - name: shipment_status
        tests: []

      - name: order_revenue
        tests: []

      - name: avg_item_price
        tests: []

      - name: total_paid_amount
        tests: []

  - name: mart_daily_revenue
    description: "Daily revenue and KPI mart"
    config:
      tags: ['mart']
    columns:
      - name: order_date
        tests:
          - not_null
          - unique

      - name: order_count
        tests:
          - not_null
      
      - name: unique_customers
        tests:
          - not_null

      - name: daily_revenue
        tests:
          - not_null

      - name: avg_order_value
        tests:
          - not_null
  
  - name: mart_customer_metrics
    description: "Aggregated customer KPIs"
    config:
      tags: ['mart']
    columns:
      - name: customer_sk    
        tests:
          - not_null

      - name: customer_name
        tests:
          - not_null
      
      - name: country
        tests:
          - not_null

      - name: total_orders
        tests:
          - not_null

      - name: lifetime_value
        tests: []

      - name: avg_order_value
        tests: []

      - name: first_order_date
        tests: []

      - name: last_order_date
        tests: []

  - name: mart_product_performance
    description: "Aggregated product KPIs"
    config:
      tags: ['mart']
    columns:
      - name: order_date
        tests:
          - not_null

      - name: product_name
        tests:
          - not_null

      - name: category
        tests:
          - not_null

      - name: price
        tests:
          - not_null

      - name: total_quantity
        tests:
          - not_null

      - name: total_revenue
        tests:
          - not_null

  - name: mart_shipments
    description: "Aggregated shipments KPIs"
    config:
      tags: ['mart']
    columns:
      - name: shipment_key
        tests:
          - not_null

      - name: order_id
        tests:
          - not_null

      - name: country
        tests:
          - not_null

      - name: carrier
        tests:
          - not_null

      - name: shipment_status
        tests:
          - not_null

      - name: delivered_date
        tests:
          - not_null